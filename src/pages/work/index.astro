---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProjectCard from '../../components/ProjectCard.astro';
import projects from '../../data/projects.json';
---

<BaseLayout title="Work â€” Explicit Studio">

  <section class="work-listing reveal">
    <h1 class="work-listing__title">The work.</h1>
    <div class="work-listing__grid">
      {projects.map((project) => (
        <ProjectCard project={project} />
      ))}
    </div>
  </section>

</BaseLayout>

<style>
  .work-listing {
    padding: 40px var(--section-padding-x) var(--section-padding-y);
  }

  .work-listing__title {
    font-size: var(--text-h1);
    font-weight: 500;
    margin-bottom: 48px;
  }

  .work-listing__grid {
    display: flex;
    flex-direction: column;
    gap: clamp(48px, 8vw, 80px);
  }

</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    },
    { threshold: 0.1 }
  );

  document.querySelectorAll('.reveal').forEach((el) => {
    observer.observe(el);
  });
</script>
