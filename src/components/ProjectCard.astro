---
const { project } = Astro.props;
const textColor = project.cardTextColor || '#F5F5F5';
const isLightText = !project.cardTextColor || project.cardTextColor !== '#1A1A1A';
const tagColor = isLightText ? 'rgba(255,255,255,0.6)' : 'rgba(0,0,0,0.5)';
const borderColor = isLightText ? 'rgba(255,255,255,0.15)' : 'rgba(0,0,0,0.1)';
const placeholderColor = isLightText ? 'rgba(255,255,255,0.3)' : 'rgba(0,0,0,0.2)';
const hasThumb = project.thumbnail && project.thumbnail.length > 0;
const isVideo = hasThumb && /\.(mp4|webm|mov)$/i.test(project.thumbnail);
---

<a
  href={`/work/${project.slug}`}
  class="project-card"
  style={`background-color: ${project.cardBg || '#1E1E1E'}; color: ${textColor};`}
>
  <div class="project-card__media" style={`border-color: ${borderColor};`}>
    {isVideo ? (
      <video src={project.thumbnail} autoplay muted loop playsinline />
    ) : hasThumb ? (
      <img src={project.thumbnail} alt={project.title} />
    ) : (
      <span class="project-card__placeholder" style={`color: ${placeholderColor};`}>
        {project.title}
      </span>
    )}
  </div>
  <div class="project-card__info">
    <h3 class="project-card__title">{project.description}</h3>
    <span class="project-card__tags" style={`color: ${tagColor};`}>{project.tags.join(', ')}</span>
  </div>
</a>

<style>
  .project-card {
    display: block;
    text-decoration: none;
    border-radius: var(--radius-md);
    padding: clamp(20px, 3vw, 40px);
    overflow: hidden;
  }

  .project-card__media {
    width: 100%;
    aspect-ratio: 16 / 9;
    border-radius: 8px;
    border: 1.5px solid rgba(255, 255, 255, 0.15);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: clamp(16px, 2vw, 28px);
  }

  .project-card__media img,
  .project-card__media video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .project-card__placeholder {
    font-size: var(--text-small);
    font-weight: 400;
  }

  .project-card__info {
    padding: 0;
  }

  .project-card__title {
    font-size: var(--text-h3);
    font-weight: 500;
    line-height: 1.4;
    margin-bottom: 8px;
    color: inherit;
  }

  .project-card__tags {
    font-size: var(--text-small);
    font-weight: 400;
  }

</style>
